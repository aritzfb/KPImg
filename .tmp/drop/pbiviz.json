{"visual":{"name":"kPImg","displayName":"KPImg","guid":"kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG_DEBUG","visualClassName":"Visual","version":"1.0.2","description":"Shows a KPI with configurable images","supportUrl":"http://www.aritzfb.com","gitHubUrl":"https://github.com/aritzfb/KPImg"},"apiVersion":"2.2.0","author":{"name":"Aritz Francoy Barreiro","email":"aritzfb@hotmail.com"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Thrend axis","name":"category","kind":"Grouping"},{"displayName":"Value","name":"value","kind":"Measure"},{"displayName":"Target","name":"target","kind":"Measure"}],"sorting":{"implicit":{"clauses":[{"role":"category","direction":1}]}},"objects":{"visualOptions":{"displayName":"KPImg Options","properties":{"urlImgOk":{"displayName":"Image OK","type":{"text":true}},"urlImgKo":{"displayName":"Image KO","type":{"text":true}},"koPercentValue":{"displayName":"KO Percent Value","type":{"numeric":true}},"showTrendLine":{"displayName":"Show Trend Line","type":{"bool":true}},"widthTrendLine":{"displayName":"Width Trend Line","type":{"numeric":true}},"kpiFontWeight":{"displayName":"Font Weight","type":{"numeric":true}},"kpiColor":{"displayName":"Font Color","type":{"fill":{"solid":{"color":true}}}},"kpifontFamily":{"displayName":"Font family","type":{"enumeration":[{"displayName":"default","description":"helvetica, arial, sans-serif","value":"helvetica, arial, sans-serif"},{"displayName":"Arial","value":"Arial"},{"displayName":"Arial Black","value":"\"Arial Black\""},{"displayName":"Arial Unicode MS","value":"\"Arial Unicode MS\""},{"displayName":"Calibri","value":"Calibri"},{"displayName":"Cambria","value":"Cambria"},{"displayName":"Cambria Math","value":"\"Cambria Math\""},{"displayName":"Candara","value":"Candara"},{"displayName":"Comic Sans MS","value":"\"Comic Sans MS\""},{"displayName":"Consolas","value":"Consolas"},{"displayName":"Constantia","value":"Constantia"},{"displayName":"Corbel","value":"Corbel"},{"displayName":"Courier New","value":"\"Courier New\""},{"displayName":"Georgia","value":"Georgia"},{"displayName":"Lucida Sans Unicode","value":"\"Lucida Sans Unicode\""},{"displayName":"Segoe (Bold)","value":"\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Segoe UI","value":"\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"},{"displayName":"Segoe UI Light","value":"\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Symbol","value":"Symbol"},{"displayName":"Tahoma","value":"Tahoma"},{"displayName":"Times New Roman","value":"\"Times New Roman\""},{"displayName":"Trebuchet MS","value":"\"Trebuchet MS\""},{"displayName":"Verdana","value":"Verdana"},{"displayName":"Wingdings","value":"Wingdings"}]}},"kpiTransparency":{"displayName":"Font Transparency","type":{"numeric":true}},"kpiVerticalAlign":{"displayName":"Indicator Vertical Align","type":{"enumeration":[{"value":"top","displayName":"Top"},{"value":"middle","displayName":"Middle"},{"value":"bottom","displayName":"Bottom"}]}},"serieColorOk":{"displayName":"Serie Color Ok","type":{"fill":{"solid":{"color":true}}}},"serieColorKo":{"displayName":"Serie Color Ko","type":{"fill":{"solid":{"color":true}}}},"serieColorNeutral":{"displayName":"Serie Color Neutral","type":{"fill":{"solid":{"color":true}}}},"seriesTransparency":{"displayName":"Series Transparency","type":{"numeric":true}}}}},"dataViewMappings":[{"conditions":[{"category":{"max":1},"value":{"max":1},"target":{"max":1}}],"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{"count":100}}},"values":{"group":{"by":"series","select":[{"for":{"in":"value"}},{"for":{"in":"target"}}]}}}}]},"stringResources":{},"content":{"js":"/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                // TODO: refactor & focus DataViewTransform into a service with well-defined dependencies.\r\n                var DataViewTransform;\r\n                (function (DataViewTransform) {\r\n                    // TODO: refactor this, setGrouped, and groupValues to a test helper to stop using it in the product\r\n                    function createValueColumns(values, valueIdentityFields, source) {\r\n                        if (values === void 0) { values = []; }\r\n                        var result = values;\r\n                        setGrouped(result);\r\n                        if (valueIdentityFields) {\r\n                            result.identityFields = valueIdentityFields;\r\n                        }\r\n                        if (source) {\r\n                            result.source = source;\r\n                        }\r\n                        return result;\r\n                    }\r\n                    DataViewTransform.createValueColumns = createValueColumns;\r\n                    function setGrouped(values, groupedResult) {\r\n                        values.grouped = groupedResult\r\n                            ? function () { return groupedResult; }\r\n                            : function () { return groupValues(values); };\r\n                    }\r\n                    DataViewTransform.setGrouped = setGrouped;\r\n                    /** Group together the values with a common identity. */\r\n                    function groupValues(values) {\r\n                        var groups = [], currentGroup;\r\n                        for (var i = 0, len = values.length; i < len; i++) {\r\n                            var value = values[i];\r\n                            if (!currentGroup || currentGroup.identity !== value.identity) {\r\n                                currentGroup = {\r\n                                    values: []\r\n                                };\r\n                                if (value.identity) {\r\n                                    currentGroup.identity = value.identity;\r\n                                    var source = value.source;\r\n                                    // allow null, which will be formatted as (Blank).\r\n                                    if (source.groupName !== undefined) {\r\n                                        currentGroup.name = source.groupName;\r\n                                    }\r\n                                    else if (source.displayName) {\r\n                                        currentGroup.name = source.displayName;\r\n                                    }\r\n                                }\r\n                                groups.push(currentGroup);\r\n                            }\r\n                            currentGroup.values.push(value);\r\n                        }\r\n                        return groups;\r\n                    }\r\n                    DataViewTransform.groupValues = groupValues;\r\n                })(DataViewTransform = dataview.DataViewTransform || (dataview.DataViewTransform = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataRoleHelper;\r\n                (function (DataRoleHelper) {\r\n                    function getMeasureIndexOfRole(grouped, roleName) {\r\n                        if (!grouped || !grouped.length) {\r\n                            return -1;\r\n                        }\r\n                        var firstGroup = grouped[0];\r\n                        if (firstGroup.values && firstGroup.values.length > 0) {\r\n                            for (var i = 0, len = firstGroup.values.length; i < len; ++i) {\r\n                                var value = firstGroup.values[i];\r\n                                if (value && value.source) {\r\n                                    if (hasRole(value.source, roleName)) {\r\n                                        return i;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    }\r\n                    DataRoleHelper.getMeasureIndexOfRole = getMeasureIndexOfRole;\r\n                    function getCategoryIndexOfRole(categories, roleName) {\r\n                        if (categories && categories.length) {\r\n                            for (var i = 0, ilen = categories.length; i < ilen; i++) {\r\n                                if (hasRole(categories[i].source, roleName)) {\r\n                                    return i;\r\n                                }\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    }\r\n                    DataRoleHelper.getCategoryIndexOfRole = getCategoryIndexOfRole;\r\n                    function hasRole(column, name) {\r\n                        var roles = column.roles;\r\n                        return roles && roles[name];\r\n                    }\r\n                    DataRoleHelper.hasRole = hasRole;\r\n                    function hasRoleInDataView(dataView, name) {\r\n                        return dataView != null\r\n                            && dataView.metadata != null\r\n                            && dataView.metadata.columns\r\n                            && dataView.metadata.columns.some(function (c) { return c.roles && c.roles[name] !== undefined; }); // any is an alias of some\r\n                    }\r\n                    DataRoleHelper.hasRoleInDataView = hasRoleInDataView;\r\n                    function hasRoleInValueColumn(valueColumn, name) {\r\n                        return valueColumn\r\n                            && valueColumn.source\r\n                            && valueColumn.source.roles\r\n                            && (valueColumn.source.roles[name] === true);\r\n                    }\r\n                    DataRoleHelper.hasRoleInValueColumn = hasRoleInValueColumn;\r\n                })(DataRoleHelper = dataview.DataRoleHelper || (dataview.DataRoleHelper = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObject;\r\n                (function (DataViewObject) {\r\n                    function getValue(object, propertyName, defaultValue) {\r\n                        if (!object) {\r\n                            return defaultValue;\r\n                        }\r\n                        var propertyValue = object[propertyName];\r\n                        if (propertyValue === undefined) {\r\n                            return defaultValue;\r\n                        }\r\n                        return propertyValue;\r\n                    }\r\n                    DataViewObject.getValue = getValue;\r\n                    /** Gets the solid color from a fill property using only a propertyName */\r\n                    function getFillColorByPropertyName(object, propertyName, defaultColor) {\r\n                        var value = getValue(object, propertyName);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    DataViewObject.getFillColorByPropertyName = getFillColorByPropertyName;\r\n                })(DataViewObject = dataview.DataViewObject || (dataview.DataViewObject = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObjects;\r\n                (function (DataViewObjects) {\r\n                    /** Gets the value of the given object/property pair. */\r\n                    function getValue(objects, propertyId, defaultValue) {\r\n                        if (!objects) {\r\n                            return defaultValue;\r\n                        }\r\n                        return dataview.DataViewObject.getValue(objects[propertyId.objectName], propertyId.propertyName, defaultValue);\r\n                    }\r\n                    DataViewObjects.getValue = getValue;\r\n                    /** Gets an object from objects. */\r\n                    function getObject(objects, objectName, defaultValue) {\r\n                        if (objects && objects[objectName]) {\r\n                            return objects[objectName];\r\n                        }\r\n                        return defaultValue;\r\n                    }\r\n                    DataViewObjects.getObject = getObject;\r\n                    /** Gets the solid color from a fill property. */\r\n                    function getFillColor(objects, propertyId, defaultColor) {\r\n                        var value = getValue(objects, propertyId);\r\n                        if (!value || !value.solid) {\r\n                            return defaultColor;\r\n                        }\r\n                        return value.solid.color;\r\n                    }\r\n                    DataViewObjects.getFillColor = getFillColor;\r\n                    function getCommonValue(objects, propertyId, defaultValue) {\r\n                        var value = getValue(objects, propertyId, defaultValue);\r\n                        if (value && value.solid) {\r\n                            return value.solid.color;\r\n                        }\r\n                        if (value === undefined\r\n                            || value === null\r\n                            || (typeof value === \"object\" && !value.solid)) {\r\n                            return defaultValue;\r\n                        }\r\n                        return value;\r\n                    }\r\n                    DataViewObjects.getCommonValue = getCommonValue;\r\n                })(DataViewObjects = dataview.DataViewObjects || (dataview.DataViewObjects = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                // powerbi.extensibility.utils.dataview\r\n                var DataRoleHelper = powerbi.extensibility.utils.dataview.DataRoleHelper;\r\n                var converterHelper;\r\n                (function (converterHelper) {\r\n                    function categoryIsAlsoSeriesRole(dataView, seriesRoleName, categoryRoleName) {\r\n                        if (dataView.categories && dataView.categories.length > 0) {\r\n                            // Need to pivot data if our category soure is a series role\r\n                            var category = dataView.categories[0];\r\n                            return category.source &&\r\n                                DataRoleHelper.hasRole(category.source, seriesRoleName) &&\r\n                                DataRoleHelper.hasRole(category.source, categoryRoleName);\r\n                        }\r\n                        return false;\r\n                    }\r\n                    converterHelper.categoryIsAlsoSeriesRole = categoryIsAlsoSeriesRole;\r\n                    function getSeriesName(source) {\r\n                        return (source.groupName !== undefined)\r\n                            ? source.groupName\r\n                            : source.queryName;\r\n                    }\r\n                    converterHelper.getSeriesName = getSeriesName;\r\n                    function isImageUrlColumn(column) {\r\n                        var misc = getMiscellaneousTypeDescriptor(column);\r\n                        return misc != null && misc.imageUrl === true;\r\n                    }\r\n                    converterHelper.isImageUrlColumn = isImageUrlColumn;\r\n                    function isWebUrlColumn(column) {\r\n                        var misc = getMiscellaneousTypeDescriptor(column);\r\n                        return misc != null && misc.webUrl === true;\r\n                    }\r\n                    converterHelper.isWebUrlColumn = isWebUrlColumn;\r\n                    function getMiscellaneousTypeDescriptor(column) {\r\n                        return column\r\n                            && column.type\r\n                            && column.type.misc;\r\n                    }\r\n                    converterHelper.getMiscellaneousTypeDescriptor = getMiscellaneousTypeDescriptor;\r\n                    function hasImageUrlColumn(dataView) {\r\n                        if (!dataView || !dataView.metadata || !dataView.metadata.columns || !dataView.metadata.columns.length) {\r\n                            return false;\r\n                        }\r\n                        return dataView.metadata.columns.some(function (column) { return isImageUrlColumn(column) === true; });\r\n                    }\r\n                    converterHelper.hasImageUrlColumn = hasImageUrlColumn;\r\n                })(converterHelper = dataview.converterHelper || (dataview.converterHelper = {}));\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var utils;\r\n        (function (utils) {\r\n            var dataview;\r\n            (function (dataview) {\r\n                var DataViewObjectsParser = (function () {\r\n                    function DataViewObjectsParser() {\r\n                    }\r\n                    DataViewObjectsParser.getDefault = function () {\r\n                        return new this();\r\n                    };\r\n                    DataViewObjectsParser.createPropertyIdentifier = function (objectName, propertyName) {\r\n                        return {\r\n                            objectName: objectName,\r\n                            propertyName: propertyName\r\n                        };\r\n                    };\r\n                    DataViewObjectsParser.parse = function (dataView) {\r\n                        var dataViewObjectParser = this.getDefault(), properties;\r\n                        if (!dataView || !dataView.metadata || !dataView.metadata.objects) {\r\n                            return dataViewObjectParser;\r\n                        }\r\n                        properties = dataViewObjectParser.getProperties();\r\n                        for (var objectName in properties) {\r\n                            for (var propertyName in properties[objectName]) {\r\n                                var defaultValue = dataViewObjectParser[objectName][propertyName];\r\n                                dataViewObjectParser[objectName][propertyName] = dataview.DataViewObjects.getCommonValue(dataView.metadata.objects, properties[objectName][propertyName], defaultValue);\r\n                            }\r\n                        }\r\n                        return dataViewObjectParser;\r\n                    };\r\n                    DataViewObjectsParser.isPropertyEnumerable = function (propertyName) {\r\n                        return !DataViewObjectsParser.InnumerablePropertyPrefix.test(propertyName);\r\n                    };\r\n                    DataViewObjectsParser.enumerateObjectInstances = function (dataViewObjectParser, options) {\r\n                        var dataViewProperties = dataViewObjectParser && dataViewObjectParser[options.objectName];\r\n                        if (!dataViewProperties) {\r\n                            return [];\r\n                        }\r\n                        var instance = {\r\n                            objectName: options.objectName,\r\n                            selector: null,\r\n                            properties: {}\r\n                        };\r\n                        for (var key in dataViewProperties) {\r\n                            if (dataViewProperties.hasOwnProperty(key)) {\r\n                                instance.properties[key] = dataViewProperties[key];\r\n                            }\r\n                        }\r\n                        return {\r\n                            instances: [instance]\r\n                        };\r\n                    };\r\n                    DataViewObjectsParser.prototype.getProperties = function () {\r\n                        var _this = this;\r\n                        var properties = {}, objectNames = Object.keys(this);\r\n                        objectNames.forEach(function (objectName) {\r\n                            if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                                var propertyNames = Object.keys(_this[objectName]);\r\n                                properties[objectName] = {};\r\n                                propertyNames.forEach(function (propertyName) {\r\n                                    if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                                        properties[objectName][propertyName] =\r\n                                            DataViewObjectsParser.createPropertyIdentifier(objectName, propertyName);\r\n                                    }\r\n                                });\r\n                            }\r\n                        });\r\n                        return properties;\r\n                    };\r\n                    return DataViewObjectsParser;\r\n                }());\r\n                DataViewObjectsParser.InnumerablePropertyPrefix = /^_/;\r\n                dataview.DataViewObjectsParser = DataViewObjectsParser;\r\n            })(dataview = utils.dataview || (utils.dataview = {}));\r\n        })(utils = extensibility.utils || (extensibility.utils = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/*\n *  Power BI Visualizations\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var visual;\n        (function (visual) {\n            var kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG;\n            (function (kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG) {\n                \"use strict\";\n                var DataViewObjectsParser = powerbi.extensibility.utils.dataview.DataViewObjectsParser;\n                var VisualSettings = (function (_super) {\n                    __extends(VisualSettings, _super);\n                    function VisualSettings() {\n                        var _this = _super !== null && _super.apply(this, arguments) || this;\n                        _this.visualOptions = new visualOptions();\n                        return _this;\n                    }\n                    return VisualSettings;\n                }(DataViewObjectsParser));\n                kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.VisualSettings = VisualSettings;\n                var kpiFontFamilyOptions;\n                (function (kpiFontFamilyOptions) {\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"default\"] = \"helvetica, arial, sans-serif\"] = \"default\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"arial\"] = \"Arial\"] = \"arial\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"arialBlack\"] = \"\\\"Arial Black\\\"\"] = \"arialBlack\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"arialUnicodeMS\"] = \"\\\"Arial Unicode MS\\\"\"] = \"arialUnicodeMS\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"calibri\"] = \"Calibri\"] = \"calibri\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"cambria\"] = \"Cambria\"] = \"cambria\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"cambriaMath\"] = \"\\\"Cambria Math\\\"\"] = \"cambriaMath\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"candara\"] = \"Candara\"] = \"candara\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"comicSansMS\"] = \"\\\"Comic Sans MS\\\"\"] = \"comicSansMS\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"consolas\"] = \"Consolas\"] = \"consolas\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"constantia\"] = \"Constantia\"] = \"constantia\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"corbel\"] = \"Corbel\"] = \"corbel\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"corbelNew\"] = \"\\\"Courier New\\\"\"] = \"corbelNew\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"georgia\"] = \"Georgia\"] = \"georgia\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"lucidaSansUnicode\"] = \"\\\"Lucida Sans Unicode\\\"\"] = \"lucidaSansUnicode\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"segoeUIBold\"] = \"\\\"Segoe UI Bold\\\", wf_segoe-ui_bold, helvetica, arial, sans-serif\"] = \"segoeUIBold\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"segoeUI\"] = \"\\\"Segoe UI\\\", wf_segoe-ui_normal, helvetica, arial, sans-serif\"] = \"segoeUI\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"segoeUILight\"] = \"\\\"Segoe UI Light\\\", wf_segoe-ui_bold, helvetica, arial, sans-serif\"] = \"segoeUILight\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"symbol\"] = \"Symbol\"] = \"symbol\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"tahoma\"] = \"Tahoma\"] = \"tahoma\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"timesNewRoman\"] = \"\\\"Times New Roman\\\"\"] = \"timesNewRoman\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"trebuchetMS\"] = \"\\\"Trebuchet MS\\\"\"] = \"trebuchetMS\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"verdana\"] = \"Verdana\"] = \"verdana\";\n                    kpiFontFamilyOptions[kpiFontFamilyOptions[\"wingdings\"] = \"Wingdings\"] = \"wingdings\";\n                })(kpiFontFamilyOptions = kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.kpiFontFamilyOptions || (kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.kpiFontFamilyOptions = {}));\n                var alignOptions;\n                (function (alignOptions) {\n                    alignOptions[alignOptions[\"top\"] = \"top\"] = \"top\";\n                    alignOptions[alignOptions[\"middle\"] = \"middle\"] = \"middle\";\n                    alignOptions[alignOptions[\"bottom\"] = \"bottom\"] = \"bottom\";\n                })(alignOptions = kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.alignOptions || (kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.alignOptions = {}));\n                var visualOptions = (function () {\n                    function visualOptions() {\n                        this.urlImgOk = \"\";\n                        this.urlImgKo = \"\";\n                        /*\n                        public urlImgOk: string=\"https://s5.eestatic.com/2017/10/10/espana/Espana_253238302_49941798_1706x960.jpg\";\n                        public urlImgKo: string=\"https://s4.eestatic.com/2017/10/10/espana/Espana_253237967_49932740_1706x960.jpg\";\n                        */\n                        this.koPercentValue = 0.5;\n                        this.showTrendLine = true;\n                        this.widthTrendLine = 5;\n                        this.kpiFontWeight = 1;\n                        this.kpiColor = \"#000000\";\n                        this.kpifontFamily = kpiFontFamilyOptions.default;\n                        this.kpiTransparency = 1;\n                        this.kpiVerticalAlign = alignOptions.middle;\n                        this.serieColorOk = \"#008000\";\n                        this.serieColorKo = \"#FF0000\";\n                        this.serieColorNeutral = \"#C0C0C0\";\n                        this.seriesTransparency = 0.4;\n                    }\n                    return visualOptions;\n                }());\n                kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.visualOptions = visualOptions;\n            })(kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG = visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG || (visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG = {}));\n        })(visual = extensibility.visual || (extensibility.visual = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\n/*\n *  Power BI Visual CLI\n *\n *  Copyright (c) Microsoft Corporation\n *  All rights reserved.\n *  MIT License\n *\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\n *  in the Software without restriction, including without limitation the rights\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n *  copies of the Software, and to permit persons to whom the Software is\n *  furnished to do so, subject to the following conditions:\n *\n *  The above copyright notice and this permission notice shall be included in\n *  all copies or substantial portions of the Software.\n *\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n *  THE SOFTWARE.\n */\nvar powerbi;\n(function (powerbi) {\n    var extensibility;\n    (function (extensibility) {\n        var visual;\n        (function (visual) {\n            var kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG;\n            (function (kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG) {\n                \"use strict\";\n                var myElementSerie = (function () {\n                    function myElementSerie() {\n                    }\n                    return myElementSerie;\n                }());\n                kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.myElementSerie = myElementSerie;\n                var Visual = (function () {\n                    function Visual(options) {\n                        this.target = options.element;\n                        var mycanvas = document.createElement(\"canvas\");\n                        //mycanvas.id=\"mycanvas\";\n                        this.target.appendChild(mycanvas);\n                    }\n                    Visual.prototype.update = function (options) {\n                        this.settings = Visual.parseSettings(options && options.dataViews && options.dataViews[0]);\n                        //data load\n                        var hasValue = false;\n                        var hasTarget = false;\n                        var hasCategories = false;\n                        if (options)\n                            if (options.dataViews)\n                                if (options.dataViews[0])\n                                    if (options.dataViews[0].categorical.categories)\n                                        hasCategories = true;\n                        if (options)\n                            if (options.dataViews)\n                                if (options.dataViews[0])\n                                    if (options.dataViews[0].categorical.values) {\n                                        if (options.dataViews[0].categorical.values.length == 2) {\n                                            hasValue = true;\n                                            hasTarget = true;\n                                        }\n                                        else if (options.dataViews[0].categorical.values.length == 1) {\n                                            if (options.dataViews[0].categorical.values[0].source.roles.value)\n                                                hasValue = true;\n                                            else\n                                                hasTarget = true;\n                                        }\n                                    }\n                        var globalValue = 0;\n                        var globalTarget = 0;\n                        var series = new Array();\n                        if (hasTarget && hasValue) {\n                            if (!hasCategories) {\n                                globalValue = parseFloat(options.dataViews[0].categorical.values[0].values[0].valueOf().toString());\n                                globalTarget = parseFloat(options.dataViews[0].categorical.values[1].values[0].valueOf().toString());\n                            }\n                            else {\n                                debugger;\n                                var minLocal, maxLocal;\n                                if (options.dataViews[0].categorical.values[0].source.roles.value) {\n                                    minLocal = options.dataViews[0].categorical.values[0].minLocal;\n                                    maxLocal = options.dataViews[0].categorical.values[0].maxLocal;\n                                }\n                                else {\n                                    minLocal = options.dataViews[0].categorical.values[1].minLocal;\n                                    maxLocal = options.dataViews[0].categorical.values[1].maxLocal;\n                                }\n                                for (var i = 0; i < options.dataViews[0].categorical.categories[0].values.length; i++) {\n                                    var myelement = new myElementSerie();\n                                    myelement.name = options.dataViews[0].categorical.categories[0].values[i].valueOf().toString();\n                                    myelement.value = parseFloat(options.dataViews[0].categorical.values[0].values[i].valueOf().toString());\n                                    myelement.target = parseFloat(options.dataViews[0].categorical.values[1].values[i].valueOf().toString());\n                                    myelement.percent = 0;\n                                    //if(myelement.target!=0) myelement.percent=myelement.value/myelement.target;\n                                    if (myelement.target != 0)\n                                        myelement.percent = (myelement.value - minLocal) / (maxLocal - minLocal);\n                                    myelement.realPercent = myelement.percent;\n                                    if (myelement.percent > 1)\n                                        myelement.percent = 1;\n                                    if (myelement.percent < 0)\n                                        myelement.percent = 0;\n                                    series.push(myelement);\n                                    globalValue += myelement.value;\n                                    globalTarget += myelement.target;\n                                }\n                            }\n                        }\n                        //end data load\n                        // load ok image\n                        var myimg = document.createElement(\"img\");\n                        if (this.settings.visualOptions.urlImgOk && this.settings.visualOptions.urlImgKo && this.settings.visualOptions.koPercentValue && hasValue && hasTarget) {\n                            var mysrc = \"\";\n                            if (globalTarget == 0 || globalValue == 0)\n                                mysrc = this.settings.visualOptions.urlImgKo.valueOf().toString();\n                            else {\n                                var currentPercent = globalValue / globalTarget;\n                                if (currentPercent >= this.settings.visualOptions.koPercentValue)\n                                    mysrc = this.settings.visualOptions.urlImgOk.valueOf().toString();\n                                else\n                                    mysrc = this.settings.visualOptions.urlImgKo.valueOf().toString();\n                            }\n                            myimg.setAttribute(\"src\", mysrc);\n                        }\n                        else\n                            myimg.setAttribute(\"src\", \"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\");\n                        myimg.onload = (function (mysettings) {\n                            return function () {\n                                var mycan = document.getElementsByTagName(\"canvas\").item(0);\n                                var myCanCtx = mycan.getContext(\"2d\");\n                                //myCanCtx.filter = \"none\";            \n                                myCanCtx.drawImage(myimg, 0, 0, mycan.width, mycan.height);\n                                if (hasValue && hasTarget) {\n                                    var indicator = 0;\n                                    if (globalTarget != 0)\n                                        indicator = globalValue / globalTarget;\n                                    var mytext = (indicator * 100).toFixed(2) + \"%\";\n                                    myCanCtx.textAlign = \"center\";\n                                    var maxSize = mycan.height;\n                                    if (maxSize > mycan.width)\n                                        maxSize = mycan.height;\n                                    var fontSize = maxSize;\n                                    myCanCtx.font = (fontSize).toString() + \"px sans-serif\";\n                                    var mytextwidth = myCanCtx.measureText(mytext).width;\n                                    while (mytextwidth > mycan.width) {\n                                        fontSize--;\n                                        myCanCtx.font = (fontSize).toString() + \"px \" + mysettings.visualOptions.kpifontFamily.valueOf().toString();\n                                        mytextwidth = myCanCtx.measureText(mytext).width;\n                                    }\n                                    var myfontWeight = mysettings.visualOptions.kpiFontWeight;\n                                    if (myfontWeight < 0)\n                                        myfontWeight = 0;\n                                    else if (myfontWeight > 1)\n                                        myfontWeight = 1;\n                                    myfontWeight = myfontWeight * fontSize;\n                                    myCanCtx.font = (myfontWeight).toString() + \"px \" + mysettings.visualOptions.kpifontFamily.valueOf().toString();\n                                    if (series.length > 0) {\n                                        myCanCtx.beginPath();\n                                        myCanCtx.moveTo(0, mycan.height);\n                                        myCanCtx.lineWidth = 1;\n                                        myCanCtx.fillStyle = mysettings.visualOptions.serieColorNeutral.valueOf().toString();\n                                        if (series.length == 1) {\n                                            myCanCtx.lineTo(0, mycan.height - series[0].percent * mycan.height);\n                                            myCanCtx.lineTo(mycan.width, mycan.height - series[1].percent * mycan.height);\n                                        }\n                                        else\n                                            for (var i = 0; i < series.length; i++) {\n                                                myCanCtx.lineTo(i * mycan.width / (series.length - 1), mycan.height - series[i].percent * mycan.height);\n                                            }\n                                        myCanCtx.lineTo(mycan.width, mycan.height);\n                                        myCanCtx.globalAlpha = parseFloat(mysettings.visualOptions.seriesTransparency.valueOf().toString());\n                                        myCanCtx.closePath();\n                                        myCanCtx.stroke();\n                                        if (series.length > 1) {\n                                            //Calculate thend: minimun squares\n                                            var totalY = 0;\n                                            var totalX = 0;\n                                            var totalXY = 0;\n                                            var totalX2 = 0;\n                                            var totalN = series.length;\n                                            for (var numSer = 0; numSer < series.length; numSer++) {\n                                                var x = numSer + 1;\n                                                var y = series[numSer].realPercent;\n                                                totalY += y;\n                                                totalX += x;\n                                                totalXY += x * y;\n                                                totalX2 += x * x;\n                                            }\n                                            var avgX = totalX / totalN;\n                                            var avgY = totalY / totalN;\n                                            //regression line: f(x)=a+bx. Calculate the factor b\n                                            var b = (totalXY - totalN * avgX * avgY) / (totalX2 - totalN * avgX * avgX);\n                                            // Calculate de a value for regression line: a=avgX\n                                            this.bRegressionLine = b;\n                                            this.aRegressionLine = avgY;\n                                            if (!mysettings.visualOptions.showTrendLine) {\n                                                myCanCtx.fillStyle = mysettings.visualOptions.serieColorOk.valueOf().toString();\n                                                if (b < 0)\n                                                    myCanCtx.fillStyle = mysettings.visualOptions.serieColorKo.valueOf().toString();\n                                            }\n                                            myCanCtx.fill();\n                                        }\n                                        //regression line\n                                        if (this.bRegressionLine && mysettings.visualOptions.showTrendLine) {\n                                            myCanCtx.beginPath();\n                                            myCanCtx.lineWidth = mysettings.visualOptions.widthTrendLine;\n                                            myCanCtx.globalAlpha = parseFloat(mysettings.visualOptions.seriesTransparency.valueOf().toString());\n                                            myCanCtx.strokeStyle = mysettings.visualOptions.serieColorNeutral.valueOf().toString();\n                                            if (this.bRegressionLine > 0)\n                                                myCanCtx.strokeStyle = mysettings.visualOptions.serieColorOk.valueOf().toString();\n                                            if (this.bRegressionLine < 0)\n                                                myCanCtx.strokeStyle = mysettings.visualOptions.serieColorKo.valueOf().toString();\n                                            myCanCtx.moveTo(0, mycan.height * (1 - this.aRegressionLine));\n                                            myCanCtx.lineTo(mycan.width, -this.bRegressionLine * mycan.width + mycan.height * (1 - this.aRegressionLine));\n                                            myCanCtx.closePath();\n                                            myCanCtx.stroke();\n                                            myCanCtx.fill();\n                                            myCanCtx.strokeStyle = mysettings.visualOptions.serieColorNeutral.valueOf().toString();\n                                        }\n                                    }\n                                    var moveHeight = mycan.height / 2 + myfontWeight / 4;\n                                    myCanCtx.fillStyle = mysettings.visualOptions.kpiColor.valueOf().toString();\n                                    myCanCtx.globalAlpha = parseFloat(mysettings.visualOptions.kpiTransparency.valueOf().toString());\n                                    if (mysettings.visualOptions.kpiVerticalAlign.valueOf().toString() == \"middle\")\n                                        //middle align\n                                        myCanCtx.fillText(mytext, mycan.width / 2, moveHeight);\n                                    else if (mysettings.visualOptions.kpiVerticalAlign.valueOf().toString() == \"top\")\n                                        //top align\n                                        myCanCtx.fillText(mytext, mycan.width / 2, myfontWeight / 1.3);\n                                    else if (mysettings.visualOptions.kpiVerticalAlign.valueOf().toString() == \"bottom\")\n                                        //bottom align\n                                        myCanCtx.fillText(mytext, mycan.width / 2, mycan.height - 5);\n                                    else\n                                        myCanCtx.fillText(mytext, mycan.width / 2, moveHeight);\n                                }\n                                //end load indicator and series\n                            };\n                        })(this.settings);\n                        var mycan = this.target.getElementsByTagName(\"canvas\").item(0);\n                        mycan.height = this.target.offsetHeight;\n                        mycan.width = this.target.offsetWidth;\n                        var myCanCtx = mycan.getContext(\"2d\");\n                        //end load ok image\n                    };\n                    Visual.parseSettings = function (dataView) {\n                        //let parsedSettings : VisualSettings = VisualSettings.parse(dataView) as VisualSettings;\n                        return kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.VisualSettings.parse(dataView);\n                        //debugger;\n                        //return parsedSettings;\n                    };\n                    /**\n                     * This function gets called for each of the objects defined in the capabilities files and allows you to select which of the\n                     * objects and properties you want to expose to the users in the property pane.\n                     *\n                     */\n                    Visual.prototype.enumerateObjectInstances = function (options) {\n                        return kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.VisualSettings.enumerateObjectInstances(this.settings || kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.VisualSettings.getDefault(), options);\n                    };\n                    return Visual;\n                }());\n                kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.Visual = Visual;\n            })(kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG = visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG || (visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG = {}));\n        })(visual = extensibility.visual || (extensibility.visual = {}));\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\n})(powerbi || (powerbi = {}));\nvar powerbi;\n(function (powerbi) {\n    var visuals;\n    (function (visuals) {\n        var plugins;\n        (function (plugins) {\n            plugins.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG_DEBUG = {\n                name: 'kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG_DEBUG',\n                displayName: 'KPImg',\n                class: 'Visual',\n                version: '1.0.2',\n                apiVersion: '2.2.0',\n                create: function (options) { return new powerbi.extensibility.visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.Visual(options); },\n                custom: true\n            };\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\n})(powerbi || (powerbi = {}));\n//# sourceMappingURL=visual.js.map","css":".visual-kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG_DEBUG p {\n  font-size: 20px;\n  font-weight: bold;\n}\n.visual-kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG_DEBUG p em {\n  background: yellow;\n  padding: 5px;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAMgSURBVDhPdZJLSFRRGMe/c+6dcRrvqDmZmjq91OmlYhFOggtp4U4XQhFYgYPoopUgtGhXQSWENRFomzZBEVEJFmqrJEZiqHzEYGGS2UzG3JlpHjqPe+7pu3NHMZz+i/P4n/M75zvn+4hcWQ2c02gsbTQEm5sUiyRGotYptwhclSTIKcYModT8kytErjgoBuSlnotFd2+XE2oESAKsqizS3Wd78kzZZc0Cm2JMDKfnXt6RHT1UiMaWeruPuobMARlJVB7A/PhE7cMHy2c7aSye8Ta0STb1CjETWS2pivkWD4gGQgjnXN8jSVIsFluIRqw2OzWbgVLN3UrGjQQEKrc020QDLm2SKCSxrbIUBFuaSSqtWdtI9CjbYRK1xRzCVyjmfIwnJ4mieQF5TR8CdHV1tbe39/X16VN8rmn1F4aUk0RRzMqiz4ej/v7+gYGB0dHRjo6OwcFBdJYWFqxT00Qxzr0Y2k6iSHBXpXzYLr1983Xa3eI4pbue2Znd9Q28/mTxV/+nyZFQ/XlhHW38FAoqHpF9KOUmU8ns58SJZqvBuMLVAMAKcFMkSu31Vu+PDHkG4in4fZosd5OfZ1iiUKUhrh0EmQrDLpWi4T9rZaXpnYXGQND8axWMRTMTw6GGTu4/cij9qqamVCsgANkHH3zXE7arlJVk4awYIyoHldGkODt2L1R3DkLFx5UvldVaLrdq3HMlXeXKZH9TgsAJ6GS47jxJpIvkq0hi/Xg8Hn2L3W4fGRk5tfeamsz/92ZFEdaITtK1PAXCjfGArdqcXd0qBca8nVtu/oc0aR/L8g2G/1QQ2qppA9ZIOjs2FK67gGQmn9hEk0ktRW632+/36xuHh4exVVPAxWgG1khh5vVNzCdGq1cCASLQvG+RRzh2OBytra1er9fpdFosFnRWvq+zwndELtuXIW+EjzmFuAX/SzsuI62mFW4Pf7TXleLU5XK1tbXV1tamojC56OTlz8kfaf+n8VvbSV2cJFlCqpCfHqk5vqMAw4XlxfW5+CW+5zFhxWRq4n6w6XJOUheHNKNBEmkkyXKgCVb4XhA5UfMJkL/zLYnva0mO9QAAAABJRU5ErkJggg=="}}