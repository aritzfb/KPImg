{"visual":{"name":"kPImg","displayName":"KPImg","guid":"kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG","visualClassName":"Visual","version":"1.0.3","description":"Shows a KPI with configurable images","supportUrl":"http://www.aritzfb.com/visuals/KPImg/KPImg.html","gitHubUrl":"https://github.com/aritzfb/KPImg"},"apiVersion":"2.2.0","author":{"name":"Aritz Francoy Barreiro","email":"aritzfb@hotmail.com"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Thrend axis","name":"category","kind":"Grouping"},{"displayName":"Value","name":"value","kind":"Measure"},{"displayName":"Target","name":"target","kind":"Measure"}],"sorting":{"implicit":{"clauses":[{"role":"category","direction":1}]}},"objects":{"visualOptions":{"displayName":"KPImg Options","properties":{"urlImgOk":{"displayName":"Image OK","type":{"text":true}},"urlImgKo":{"displayName":"Image KO","type":{"text":true}},"koPercentValue":{"displayName":"KO Percent Value","type":{"numeric":true}},"showTrendLine":{"displayName":"Show Trend Line","type":{"bool":true}},"showMode":{"displayName":"Display values","type":{"enumeration":[{"displayName":"Only % Compilance","value":"comp"},{"displayName":"Only Indicator","value":"indi"},{"displayName":"Indicator and % Compilance","value":"both"}]}},"formatIndicator":{"displayName":"Indicator format","type":{"enumeration":[{"displayName":"Auto","value":"auto"},{"displayName":"None","value":"none"},{"displayName":"k","value":"k"},{"displayName":"M","value":"M"},{"displayName":"B","value":"B"},{"displayName":"kB","value":"kB"}]}},"widthTrendLine":{"displayName":"Width Trend Line","type":{"numeric":true}},"kpiFontWeight":{"displayName":"Indicator Font Weight","type":{"numeric":true}},"kpiFontWeightTarget":{"displayName":"% Compilance Font Weight","type":{"numeric":true}},"valueLocale":{"displayName":"Locale","type":{"enumeration":[{"displayName":"US English","value":"en-US"},{"displayName":"Arabic (Saudi Arabia)","value":"ar-SA"},{"displayName":"Bangla (Bangladesh)","value":"bn-BD"},{"displayName":"Bangla (India)","value":"bn-IN"},{"displayName":"Czech (Czech Republic)","value":"cs-CZ"},{"displayName":"Danish (Denmark)","value":"da-DK"},{"displayName":"Austrian German","value":"de-AT"},{"displayName":"\"Swiss\" German","value":"de-CH"},{"displayName":"Standard German","value":"de-DE"},{"displayName":"Modern Greek","value":"el-GR"},{"displayName":"Australian English","value":"en-AU"},{"displayName":"Canadian English","value":"en-CA"},{"displayName":"British English","value":"en-GB"},{"displayName":"Irish English","value":"en-IE"},{"displayName":"Indian English","value":"en-IN"},{"displayName":"New Zealand English","value":"en-NZ"},{"displayName":"English (South Africa)","value":"en-ZA"},{"displayName":"Argentine Spanish","value":"es-AR"},{"displayName":"Chilean Spanish","value":"es-CL"},{"displayName":"Colombian Spanish","value":"es-CO"},{"displayName":"Castilian Spanish","value":"es-ES"},{"displayName":"Mexican Spanish","value":"es-MX"},{"displayName":"American Spanish","value":"es-US"},{"displayName":"Finnish (Finland)","value":"fi-FI"},{"displayName":"Belgian French","value":"fr-BE"},{"displayName":"Canadian French","value":"fr-CA"},{"displayName":"\"Swiss\" French","value":"fr-CH"},{"displayName":"Standard French","value":"fr-FR"},{"displayName":"Hebrew (Israel)","value":"he-IL"},{"displayName":"Hindi (India)","value":"hi-IN"},{"displayName":"Hungarian (Hungary)","value":"hu-HU"},{"displayName":"Indonesian (Indonesia)","value":"id-ID"},{"displayName":"\"Swiss\" Italian","value":"it-CH"},{"displayName":"Standard Italian","value":"it-IT"},{"displayName":"Japanese (Japan)","value":"jp-JP"},{"displayName":"Korean (Republic of Korea)","value":"ko-KR"},{"displayName":"Belgian Dutch","value":"nl-BE"},{"displayName":"Standard Dutch","value":"nl-NL"},{"displayName":"Norwegian (Norway)","value":"no-NO"},{"displayName":"Polish (Poland)","value":"pl-PL"},{"displayName":"Brazilian Portuguese","value":"pt-BR"},{"displayName":"European Portuguese","value":"pt-PT"},{"displayName":"Romanian (Romania)","value":"ro-RO"},{"displayName":"Russian (Russian Federation)","value":"ru-RU"},{"displayName":"Slovak (Slovakia)","value":"sk-SK"},{"displayName":"Swedish (Sweden)","value":"sv-SE"},{"displayName":"Indian Tamil","value":"ta-IN"},{"displayName":"Sri Lankan Tamil","value":"ta-LK"},{"displayName":"Thai (Thailand)","value":"th-TH"},{"displayName":"Turkish (Turkey)","value":"tr-TR"},{"displayName":"Mainland China","value":"zh-CN"},{"displayName":"Hong Kong","value":"zh-HK"},{"displayName":"Taiwan","value":"zh-TW"}]}},"numberDecimals":{"displayName":"Decimal Positions","type":{"numeric":true}},"kpiColor":{"displayName":"Indicator Font Color","type":{"fill":{"solid":{"color":true}}}},"kpiColorTarget":{"displayName":"% Compilance Font Color","type":{"fill":{"solid":{"color":true}}}},"kpifontFamily":{"displayName":"Font family","type":{"enumeration":[{"displayName":"default","description":"helvetica, arial, sans-serif","value":"helvetica, arial, sans-serif"},{"displayName":"Arial","value":"Arial"},{"displayName":"Arial Black","value":"\"Arial Black\""},{"displayName":"Arial Unicode MS","value":"\"Arial Unicode MS\""},{"displayName":"Calibri","value":"Calibri"},{"displayName":"Cambria","value":"Cambria"},{"displayName":"Cambria Math","value":"\"Cambria Math\""},{"displayName":"Candara","value":"Candara"},{"displayName":"Comic Sans MS","value":"\"Comic Sans MS\""},{"displayName":"Consolas","value":"Consolas"},{"displayName":"Constantia","value":"Constantia"},{"displayName":"Corbel","value":"Corbel"},{"displayName":"Courier New","value":"\"Courier New\""},{"displayName":"Georgia","value":"Georgia"},{"displayName":"Lucida Sans Unicode","value":"\"Lucida Sans Unicode\""},{"displayName":"Segoe (Bold)","value":"\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Segoe UI","value":"\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif"},{"displayName":"Segoe UI Light","value":"\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif"},{"displayName":"Symbol","value":"Symbol"},{"displayName":"Tahoma","value":"Tahoma"},{"displayName":"Times New Roman","value":"\"Times New Roman\""},{"displayName":"Trebuchet MS","value":"\"Trebuchet MS\""},{"displayName":"Verdana","value":"Verdana"},{"displayName":"Wingdings","value":"Wingdings"}]}},"kpiTransparency":{"displayName":"Font Transparency","type":{"numeric":true}},"kpiVerticalAlign":{"displayName":"Indicator Vertical Align","type":{"enumeration":[{"value":"top","displayName":"Top"},{"value":"middle","displayName":"Middle"},{"value":"bottom","displayName":"Bottom"}]}},"serieColorOk":{"displayName":"Serie Color Ok","type":{"fill":{"solid":{"color":true}}}},"serieColorKo":{"displayName":"Serie Color Ko","type":{"fill":{"solid":{"color":true}}}},"serieColorNeutral":{"displayName":"Serie Color Neutral","type":{"fill":{"solid":{"color":true}}}},"seriesTransparency":{"displayName":"Series Transparency","type":{"numeric":true}}}}},"dataViewMappings":[{"conditions":[{"category":{"max":1},"value":{"max":1},"target":{"max":1}}],"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{"count":100}}},"values":{"group":{"by":"series","select":[{"for":{"in":"value"}},{"for":{"in":"target"}}]}}}}]},"stringResources":{},"content":{"js":"var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,a){void 0===e&&(e=[]);var n=e;return i(n),t&&(n.identityFields=t),a&&(n.source=a),n}function i(e,t){e.grouped=t?function(){return t}:function(){return a(e)}}function a(e){for(var t,i=[],a=0,n=e.length;n>a;a++){var r=e[a];if(!t||t.identity!==r.identity){if(t={values:[]},r.identity){t.identity=r.identity;var o=r.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}i.push(t)}t.values.push(r)}return i}e.createValueColumns=t,e.setGrouped=i,e.groupValues=a}(t=e.DataViewTransform||(e.DataViewTransform={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!e||!e.length)return-1;var i=e[0];if(i.values&&i.values.length>0)for(var n=0,r=i.values.length;r>n;++n){var o=i.values[n];if(o&&o.source&&a(o.source,t))return n}return-1}function i(e,t){if(e&&e.length)for(var i=0,n=e.length;n>i;i++)if(a(e[i].source,t))return i;return-1}function a(e,t){var i=e.roles;return i&&i[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some(function(e){return e.roles&&void 0!==e.roles[t]})}function r(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=i,e.hasRole=a,e.hasRoleInDataView=n,e.hasRoleInValueColumn=r}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i){if(!e)return i;var a=e[t];return void 0===a?i:a}function i(e,i,a){var n=t(e,i);return n&&n.solid?n.solid.color:a}e.getValue=t,e.getFillColorByPropertyName=i}(t=e.DataViewObject||(e.DataViewObject={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){function i(t,i,a){return t?e.DataViewObject.getValue(t[i.objectName],i.propertyName,a):a}function a(e,t,i){return e&&e[t]?e[t]:i}function n(e,t,a){var n=i(e,t);return n&&n.solid?n.solid.color:a}function r(e,t,a){var n=i(e,t,a);return n&&n.solid?n.solid.color:void 0===n||null===n||\"object\"==typeof n&&!n.solid?a:n}t.getValue=i,t.getObject=a,t.getFillColor=n,t.getCommonValue=r}(t=e.DataViewObjects||(e.DataViewObjects={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i,a=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e,t,i){if(e.categories&&e.categories.length>0){var n=e.categories[0];return n.source&&a.hasRole(n.source,t)&&a.hasRole(n.source,i)}return!1}function i(e){return void 0!==e.groupName?e.groupName:e.queryName}function n(e){var t=o(e);return null!=t&&t.imageUrl===!0}function r(e){var t=o(e);return null!=t&&t.webUrl===!0}function o(e){return e&&e.type&&e.type.misc}function s(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length?e.metadata.columns.some(function(e){return n(e)===!0}):!1}e.categoryIsAlsoSeriesRole=t,e.getSeriesName=i,e.isImageUrlColumn=n,e.isWebUrlColumn=r,e.getMiscellaneousTypeDescriptor=o,e.hasImageUrlColumn=s}(i=t.converterHelper||(t.converterHelper={}))}(i=t.dataview||(t.dataview={}))}(i=t.utils||(t.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var i,a=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return a;i=a.getProperties();for(var n in i)for(var r in i[n]){var o=a[n][r];a[n][r]=e.DataViewObjects.getCommonValue(t.metadata.objects,i[n][r],o)}return a},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var i=e&&e[t.objectName];if(!i)return[];var a={objectName:t.objectName,selector:null,properties:{}};for(var n in i)i.hasOwnProperty(n)&&(a.properties[n]=i[n]);return{instances:[a]}},t.prototype.getProperties=function(){var e=this,i={},a=Object.keys(this);return a.forEach(function(a){if(t.isPropertyEnumerable(a)){var n=Object.keys(e[a]);i[a]={},n.forEach(function(e){t.isPropertyEnumerable(a)&&(i[a][e]=t.createPropertyIdentifier(a,e))})}}),i},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function a(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){\"use strict\";var i=e.extensibility.utils.dataview.DataViewObjectsParser,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.visualOptions=new u,t}return __extends(t,e),t}(i);t.VisualSettings=a;var n;!function(e){e[e.arabic=\"ar-SA\"]=\"arabic\",e[e.bangladesh=\"bn-BD\"]=\"bangladesh\",e[e.india=\"bn-IN\"]=\"india\",e[e.czech=\"cs-CZ\"]=\"czech\",e[e.denmark=\"da-DK\"]=\"denmark\",e[e.german=\"de-AT\"]=\"german\",e[e.swiss=\"de-CH\"]=\"swiss\",e[e.standardGerman=\"de-DE\"]=\"standardGerman\",e[e.greek=\"el-GR\"]=\"greek\",e[e.australian=\"en-AU\"]=\"australian\",e[e.canadian=\"en-CA\"]=\"canadian\",e[e.british=\"en-GB\"]=\"british\",e[e.irish=\"en-IE\"]=\"irish\",e[e.indian=\"en-IN\"]=\"indian\",e[e.newZealand=\"en-NZ\"]=\"newZealand\",e[e.usEnglish=\"en-US\"]=\"usEnglish\",e[e.southAfrica=\"en-ZA\"]=\"southAfrica\",e[e.argentine=\"es-AR\"]=\"argentine\",e[e.chilean=\"es-CL\"]=\"chilean\",e[e.colombian=\"es-CO\"]=\"colombian\",e[e.spanish=\"es-ES\"]=\"spanish\",e[e.mexican=\"es-MX\"]=\"mexican\",e[e.americanSpanish=\"es-US\"]=\"americanSpanish\",e[e.finland=\"fi-FI\"]=\"finland\",e[e.belgian=\"fr-BE\"]=\"belgian\",e[e.canadianFrench=\"fr-CA\"]=\"canadianFrench\",e[e.swissFrench=\"fr-CH\"]=\"swissFrench\",e[e.french=\"fr-FR\"]=\"french\",e[e.israel=\"he-IL\"]=\"israel\",e[e.hindi=\"hi-IN\"]=\"hindi\",e[e.hungarian=\"hu-HU\"]=\"hungarian\",e[e.indonesian=\"id-ID\"]=\"indonesian\",e[e.italianSwiss=\"it-CH\"]=\"italianSwiss\",e[e.italian=\"it-IT\"]=\"italian\",e[e.japanese=\"jp-JP\"]=\"japanese\",e[e.korean=\"ko-KR\"]=\"korean\",e[e.belgianDutch=\"nl-BE\"]=\"belgianDutch\",e[e.dutch=\"nl-NL\"]=\"dutch\",e[e.norwegian=\"no-NO\"]=\"norwegian\",e[e.polish=\"pl-PL\"]=\"polish\",e[e.brazilianPortuguese=\"pt-BR\"]=\"brazilianPortuguese\",e[e.portuguese=\"pt-PT\"]=\"portuguese\",e[e.romanian=\"ro-RO\"]=\"romanian\",e[e.russian=\"ru-RU\"]=\"russian\",e[e.slovak=\"sk-SK\"]=\"slovak\",e[e.swedish=\"sv-SE\"]=\"swedish\",e[e.indianTamil=\"ta-IN\"]=\"indianTamil\",e[e.sriLankan=\"ta-LK\"]=\"sriLankan\",e[e.thai=\"th-TH\"]=\"thai\",e[e.turkish=\"tr-TR\"]=\"turkish\",e[e.mainlandChina=\"zh-CN\"]=\"mainlandChina\",e[e.hongKong=\"zh-HK\"]=\"hongKong\",e[e.taiwan=\"zh-TW\"]=\"taiwan\"}(n=t.localeValues||(t.localeValues={}));var r;!function(e){e[e[\"default\"]=\"helvetica, arial, sans-serif\"]=\"default\",e[e.arial=\"Arial\"]=\"arial\",e[e.arialBlack='\"Arial Black\"']=\"arialBlack\",e[e.arialUnicodeMS='\"Arial Unicode MS\"']=\"arialUnicodeMS\",e[e.calibri=\"Calibri\"]=\"calibri\",e[e.cambria=\"Cambria\"]=\"cambria\",e[e.cambriaMath='\"Cambria Math\"']=\"cambriaMath\",e[e.candara=\"Candara\"]=\"candara\",e[e.comicSansMS='\"Comic Sans MS\"']=\"comicSansMS\",e[e.consolas=\"Consolas\"]=\"consolas\",e[e.constantia=\"Constantia\"]=\"constantia\",e[e.corbel=\"Corbel\"]=\"corbel\",e[e.corbelNew='\"Courier New\"']=\"corbelNew\",e[e.georgia=\"Georgia\"]=\"georgia\",e[e.lucidaSansUnicode='\"Lucida Sans Unicode\"']=\"lucidaSansUnicode\",e[e.segoeUIBold='\"Segoe UI Bold\", wf_segoe-ui_bold, helvetica, arial, sans-serif']=\"segoeUIBold\",e[e.segoeUI='\"Segoe UI\", wf_segoe-ui_normal, helvetica, arial, sans-serif']=\"segoeUI\",e[e.segoeUILight='\"Segoe UI Light\", wf_segoe-ui_bold, helvetica, arial, sans-serif']=\"segoeUILight\",e[e.symbol=\"Symbol\"]=\"symbol\",e[e.tahoma=\"Tahoma\"]=\"tahoma\",e[e.timesNewRoman='\"Times New Roman\"']=\"timesNewRoman\",e[e.trebuchetMS='\"Trebuchet MS\"']=\"trebuchetMS\",e[e.verdana=\"Verdana\"]=\"verdana\",e[e.wingdings=\"Wingdings\"]=\"wingdings\"}(r=t.kpiFontFamilyOptions||(t.kpiFontFamilyOptions={}));var o;!function(e){e[e.top=\"top\"]=\"top\",e[e.middle=\"middle\"]=\"middle\",e[e.bottom=\"bottom\"]=\"bottom\"}(o=t.alignOptions||(t.alignOptions={}));var s;!function(e){e[e.comp=\"comp\"]=\"comp\",e[e.indi=\"indi\"]=\"indi\",e[e.both=\"both\"]=\"both\"}(s=t.showModes||(t.showModes={}));var l;!function(e){e[e.auto=\"auto\"]=\"auto\",e[e.none=\"none\"]=\"none\",e[e.k=\"k\"]=\"k\",e[e.M=\"M\"]=\"M\",e[e.B=\"B\"]=\"B\",e[e.kB=\"kB\"]=\"kB\"}(l=t.formatIndicators||(t.formatIndicators={}));var u=function(){function e(){this.urlImgOk=\"\",this.urlImgKo=\"\",this.koPercentValue=.5,this.showTrendLine=!0,this.showMode=s.both,this.formatIndicator=l.auto,this.widthTrendLine=5,this.kpiFontWeight=1,this.kpiFontWeightTarget=1,this.valueLocale=n.usEnglish,this.numberDecimals=2,this.kpiColor=\"#000000\",this.kpiColorTarget=\"#000000\",this.kpifontFamily=r[\"default\"],this.kpiTransparency=1,this.kpiVerticalAlign=o.middle,this.serieColorOk=\"#008000\",this.serieColorKo=\"#FF0000\",this.serieColorNeutral=\"#C0C0C0\",this.seriesTransparency=.4}return e}();t.visualOptions=u}(i=t.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG||(t.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG={}))}(i=t.visual||(t.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){\"use strict\";var t=function(){function e(){}return e}();e.myElementSerie=t;var i=function(){function i(e){this.target=e.element;var t=document.createElement(\"canvas\");this.target.appendChild(t),this.host=e.host}return i.prototype.update=function(e){function a(e){for(var t=!0,i=0;i<e.length;i++){var a=parseFloat(e[i]);if(isNaN(a)){t=!1;break}}return t}function n(e){var t=g.height/(b-m)*(e-m);return b-m==0&&(t=g.height/2),t}this.settings=i.parseSettings(e&&e.dataViews&&e.dataViews[0]);var r,o,s=!1,l=!1,u=!1,c=0,v=0;e&&e.dataViews&&e.dataViews[0]&&e.dataViews[0].categorical.categories&&(u=!0),e&&e.dataViews&&e.dataViews[0]&&e.dataViews[0].categorical.values&&(2==e.dataViews[0].categorical.values.length?(s=!0,l=!0,e.dataViews[0].categorical.values[0].source.roles.value?(r=0,a(e.dataViews[0].categorical.values[0].values)||(s=!1),o=1,a(e.dataViews[0].categorical.values[1].values)||(l=!1)):(r=1,a(e.dataViews[0].categorical.values[1].values)||(s=!1),o=0,a(e.dataViews[0].categorical.values[0].values)||(l=!1))):1==e.dataViews[0].categorical.values.length&&(e.dataViews[0].categorical.values[0].source.roles.value?(s=!0,r=0,a(e.dataViews[0].categorical.values[0].values)||(s=!1)):(l=!0,o=0,a(e.dataViews[0].categorical.values[0].values)||(l=!1))));var g=this.target.getElementsByTagName(\"canvas\").item(0);g.height=this.target.offsetHeight,g.width=this.target.offsetWidth;g.getContext(\"2d\");g.hidden=!1;var h=document.createElement(\"div\");h.id=\"kpimgnovalue\",h.hidden=!0;var p=0,d=0,f=new Array;if(s){if(u){var m,b;m=e.dataViews[0].categorical.values[r].minLocal,b=e.dataViews[0].categorical.values[r].maxLocal,c=m,v=b;for(var w=0;w<e.dataViews[0].categorical.categories[0].values.length;w++){var O=new t;O.name=e.dataViews[0].categorical.categories[0].values[w].valueOf().toString(),O.value=parseFloat(e.dataViews[0].categorical.values[0].values[w].valueOf().toString()),l&&(O.target=parseFloat(e.dataViews[0].categorical.values[1].values[w].valueOf().toString())),O.percent=0,b-m!=0?O.percent=(O.value-m)/(b-m):O.percent=.5,O.realPercent=O.percent,O.percent>1&&(O.percent=1),O.percent<0&&(O.percent=0),f.push(O),p+=O.value,l&&(d+=O.target)}}else p=parseFloat(e.dataViews[0].categorical.values[r].values[0].valueOf().toString()),l&&(d=parseFloat(e.dataViews[0].categorical.values[o].values[0].valueOf().toString()));var S=document.createElement(\"img\");if(this.settings.visualOptions.urlImgOk&&this.settings.visualOptions.urlImgKo&&this.settings.visualOptions.koPercentValue&&s&&l){var y=\"\";if(0==d||0==p)y=this.settings.visualOptions.urlImgKo.valueOf().toString();else{var k;k=l?p/d:p,y=k>=this.settings.visualOptions.koPercentValue?this.settings.visualOptions.urlImgOk.valueOf().toString():this.settings.visualOptions.urlImgKo.valueOf().toString()}S.setAttribute(\"src\",y)}else S.setAttribute(\"src\",\"data:image/png;base64, iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=\");S.onload=function(e,t){return function(){function i(e,t,i,a){var n=e.getContext(\"2d\"),r=e.height/a;e.width<r&&(r=e.width);var o=r;n.font=o.toString()+\"px \"+i;for(var s=n.measureText(t).width;s>e.width;)o--,n.font=o.toString()+\"px \"+i,s=n.measureText(t).width;return o}function a(t){var i=\"\";if(t)switch(e.visualOptions.formatIndicator.valueOf().toString()){case\"none\":i=parseFloat(t.toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString());break;case\"auto\":for(var a=t,n=parseFloat(a.toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString()).length,r=0;n>4;)r++,a/=1e3,n=parseFloat(a.toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString()).length;var o=\"\";1==r?o=\"k\":2==r?o=\"M\":3==r?o=\"B\":r>=4&&(o=\"kB\"),i=parseFloat(a.toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+o;break;case\"k\":i=parseFloat((t/1e3).toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+\"k\";break;case\"M\":i=parseFloat((t/1e6).toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+\"M\";break;case\"B\":i=parseFloat((t/1e9).toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+\"B\";break;case\"kB\":i=parseFloat((t/1e12).toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+\"kB\"}return i}var r=document.getElementsByTagName(\"canvas\").item(0),o=r.getContext(\"2d\");o.drawImage(S,0,0,r.width,r.height);var u=0;if(s&&(u=1),s&&l&&(u=2),\"indi\"==e.visualOptions.showMode.valueOf().toString()&&(u=1),\"comp\"==e.visualOptions.showMode.valueOf().toString()&&(u=1),s){if(f.length>0){if(o.beginPath(),o.moveTo(0,r.height),o.lineWidth=1,o.fillStyle=e.visualOptions.serieColorNeutral.valueOf().toString(),1==f.length)o.lineTo(0,r.height-f[0].percent*r.height),o.lineTo(r.width,r.height-f[1].percent*r.height);else for(var c=0;c<f.length;c++)o.lineTo(c*r.width/(f.length-1),r.height-f[c].percent*r.height);if(o.lineTo(r.width,r.height),o.globalAlpha=parseFloat(e.visualOptions.seriesTransparency.valueOf().toString()),o.closePath(),o.stroke(),f.length>1){for(var v=0,g=0,h=0,m=0,b=f.length,w=0,O=0,y=0,k=0,V=0;V<f.length;V++){var A=V*(r.width/f.length),C=f[V].realPercent,F=V,x=f[V].value;v+=C,w+=x,g+=A,O+=F,h+=A*C,y+=F*x,m+=A*A,k+=F*F}var I=O/b,D=w/b,E=(b*h-g*v)/(b*m-g*g),T=(b*y-O*w)/(b*k-O*O);this.bRegressionLine=E,this.aRegressionLine=(v-this.bRegressionLine*g)/b;for(var B=(w-T*O)/b,L=0,N=0,P=0,V=0;V<f.length;V++){var A=V,C=f[V].value;L+=(A-I)*(C-D),N+=(A-I)*(A-I),P+=(C-D)*(C-D)}this.covariance=L/(Math.sqrt(N)*Math.sqrt(P)),Math.sqrt(N)*Math.sqrt(P)==0&&(this.covariance=1),this.covariance=100*this.covariance,this.predictedValue=B+T*f.length,t.onmouseover=function(e,t,i){return function(){if(!document.getElementById(\"kpimgalternatetext\")){r.hidden=!0;var n=document.createElement(\"div\");n.id=\"kpimgalternatetext\",n.innerHTML+=\"<p>Last element name: \"+f[f.length-1].name+\"</p>\",n.innerHTML+=\"<p>Predicted value for next element: \"+a(i)+\"</p>\",n.innerHTML+=\"<p>Reliability: \"+Math.abs(t).toFixed(2)+\"%</p>\",e.appendChild(n)}}}(t,this.covariance,this.predictedValue),t.onmouseleave=function(e){r.hidden=!1,document.getElementById(\"kpimgalternatetext\").remove()},e.visualOptions.showTrendLine||(o.fillStyle=e.visualOptions.serieColorOk.valueOf().toString(),0>E&&(o.fillStyle=e.visualOptions.serieColorKo.valueOf().toString())),o.fill()}if(e.visualOptions.showTrendLine){o.beginPath(),o.lineWidth=e.visualOptions.widthTrendLine,o.globalAlpha=parseFloat(e.visualOptions.seriesTransparency.valueOf().toString()),o.strokeStyle=e.visualOptions.serieColorNeutral.valueOf().toString(),T>=0&&(o.strokeStyle=e.visualOptions.serieColorOk.valueOf().toString()),0>T&&(o.strokeStyle=e.visualOptions.serieColorKo.valueOf().toString());var M=r.height-n(B),U=r.height-n((b-1)*T+B);o.moveTo(0,M),o.lineTo(r.width,U),o.closePath(),o.stroke(),o.fill(),o.strokeStyle=e.visualOptions.serieColorNeutral.valueOf().toString()}}var R=a(p);o.textAlign=\"center\";var j=i(r,R,e.visualOptions.kpifontFamily.valueOf().toString(),u),_=e.visualOptions.kpiFontWeight;0>_?_=0:_>1&&(_=1),_*=j,o.font=_.toString()+\"px \"+e.visualOptions.kpifontFamily.valueOf().toString();var H=r.height/2+_/4;if(o.fillStyle=e.visualOptions.kpiColor.valueOf().toString(),o.globalAlpha=parseFloat(e.visualOptions.kpiTransparency.valueOf().toString()),\"indi\"==e.visualOptions.showMode.valueOf().toString()?\"middle\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,H):\"top\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,_/1.3):\"bottom\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,r.height-5):o.fillText(R,r.width/2,H):\"both\"==e.visualOptions.showMode.valueOf().toString()&&o.fillText(R,r.width/2,_/1.3),d&&0!=d){var K=p/d;R=parseFloat((100*K).toFixed(e.visualOptions.numberDecimals)).toLocaleString(e.visualOptions.valueLocale.toString())+\"%\",o.textAlign=\"center\",j=i(r,R,e.visualOptions.kpifontFamily.valueOf().toString(),u),_=e.visualOptions.kpiFontWeightTarget,0>_?_=0:_>1&&(_=1),_*=j,o.font=_.toString()+\"px \"+e.visualOptions.kpifontFamily.valueOf().toString(),o.fillStyle=e.visualOptions.kpiColorTarget.valueOf().toString(),\"comp\"==e.visualOptions.showMode.valueOf().toString()?\"middle\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,H):\"top\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,_/1.3):\"bottom\"==e.visualOptions.kpiVerticalAlign.valueOf().toString()?o.fillText(R,r.width/2,r.height-5):o.fillText(R,r.width/2,H):\"both\"==e.visualOptions.showMode.valueOf().toString()&&o.fillText(R,r.width/2,r.height-.01*r.height)}}}}(this.settings,this.target)}else g.hidden=!0,h.hidden=!1,h.innerHTML=\"<p>The field Value must contains a numeric column.</p>\",this.target.appendChild(h)},i.parseSettings=function(t){return e.VisualSettings.parse(t)},i.prototype.enumerateObjectInstances=function(t){return e.VisualSettings.enumerateObjectInstances(this.settings||e.VisualSettings.getDefault(),t)},i}();e.Visual=i}(t=e.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG||(e.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG={}))}(t=e.visual||(e.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG={name:\"kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG\",displayName:\"KPImg\",\"class\":\"Visual\",version:\"1.0.3\",apiVersion:\"2.2.0\",create:function(t){return new e.extensibility.visual.kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG.Visual(t)},custom:!0}}(i=t.plugins||(t.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));","css":".visual-kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG p{font-size:20px;font-weight:bold}.visual-kPImg0051F6D5AD8348148E01E9E4B31C9F41_DEBUG p em{background:yellow;padding:5px}","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAABgmlDQ1BJQ0MgcHJvZmlsZQAAeNqV0D1oUwEUxfHfe1Eq2tLBgKIF3xDFwYJoEUeJYhAslDRCEh1MXpo2kJeGfODSUXAtOPixWHVwcdbVwVUQBD9AXFydFF2kxCGBBCGCdzqce8/l3j/hTjNOuntOk7R6nXwuGxVL5WjmqwOOOuSYk5W4215evVwwtX69F8C7xWacdP1fzdXWujFBhAtxu9MjuIlzt3rtHsF9pOONSo3gOU51iqUywUekq0P9Den1YqlMCOlOIX+RMI1ofUJXJ3S80UkIl5CpJa0aYXGoazXCLWSSZj8e3Rlgdq11bRUZLMi5YtmKSFVfQ1PPooaWSFdeTnZK/ggWrOiramqIRS7ZlKhoaFEslaO/2XbrZ88MN81m2ftlMPhxnJm77G4PBr8fDwa7T0h95lVrnN/c4fxPUttjL/OI+du8eD32qvd4eYfDn9qVTgWkENbrfH/GXImDb9l/fcht1Pf0A4Utrr7hwUNOrDN/Y8rf+ya5/XNmxO8P0bFyzaFDK5QAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfjCx0LLSSZ2ywAAAAAGXRFWHRDb21tZW50AENyZWF0ZWQgd2l0aCBHSU1QV4EOFwAAAyxJREFUOMuNzcuKXFUUBuB/7dupU9XVZV9y6aSJNkGIgZAgOg2OfQQdONGBCEJEBFERInSQHkTEmWNnPoWIM0UQogODHe1gp2/VZdXpffZlreUjJN8LfFSULVBy9iEIjKg4MiQK1GpsjxS0DQIRwIEoUR/qgCyEMhlSgWoIQav2XefIcBWAuHonptUSqCrB+I5oTsx5QK9+9wKpiY5IRVWEjAEAIKdCRD44KLSekR3CRpU2JzRtVG5vf/O8TlaMnP7wxq4BQMaAoAIoQuNdcEqAqeQdrMx7FqpNQF/bua28yYNOS1xFU41ClZCF1SqgOUYQCgB1IM5s7GBJ6RQKccdv33/FTi/9C/rpvV9mZAwRVRUYSyBAQ9MQhFEqA7UNymCorqPAYhLGeYmOxyOlMh0WNVAoFwMhCBYRKUGkAeAqetx999YQyVWgTaS8dBbWUn+5TOHGHtWAOTgPYahg0Lx++zWUaoAi7oM3N5ans4/feVFdAuy9ry+vVl7j4fdv/Z3JgRoD1yEbGI9Mn167snV08tlLNxnx8+tXVnZHh3vrzZOk5Ds14eT8ao6TUiksbIK6mUGWeUAEoLn3fhAjgDubt3Th4skipemgjLdfvjqgsjjo3IlHvlKysQ6EQKp5rm5I9P7mVuC4MV7eq7Iec1yeUD6aLVguuEtrJsWLo82juGbvfvsjdOOsQztik8WNmWzFapDz7eqszDVxfM4dyfRcttuHB6P5MD6kjo5xxP6fVOsFZrQjEFkTClUnQNofptylw8yNX+pTWe3Cnd1fJwytjQ3rK4fdyeNTOZg4a6wrRKmUQkW1R9neuGmHsy65nb3frDQfbt348tGDM7gx15ktX1y91qN4kZ2/9qWoYuZda6hxLsMG43xfmM7Zxpbx1NPOw5+J3VAqoBNpmTiwdXE5A60nYETqoTCLgLYSI6YmPMJ/1dOKgmgEgvXTU+8FuP/7gzWu9/b/GGIhKoAXBhSkevbR5RsT0sOSv3ryJ7RRKIFBDk9jCoy0o8cBWB5nGChEqXDBs9DKMZ18cvF61IV2ZVqKqoqyPgNKooEFtVZb4YdOASDmvm0GT43/B1h3CidfALM2AAAAAElFTkSuQmCC"}}